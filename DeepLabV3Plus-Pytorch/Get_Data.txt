# 1. åˆ›å»ºæ•°æ®æ–‡ä»¶å¤¹
mkdir -p DeepLabV3Plus-Pytorch/datasets/data/VOCdevkit
cd DeepLabV3Plus-Pytorch/datasets/data/VOCdevkit

# 2. ä¸‹è½½ Pascal VOC 2012 å®˜æ–¹æ•°æ®é›†
echo "ğŸ“¥ Downloading Pascal VOC 2012..."
wget http://host.robots.ox.ac.uk/pascal/VOC/voc2012/VOCtrainval_11-May-2012.tar
tar -xvf VOCtrainval_11-May-2012.tar
rm VOCtrainval_11-May-2012.tar

# 3. ä¸‹è½½å¢å¼ºæ ‡æ³¨ï¼ˆæ¥è‡ª Dropbox å¤‡ä»½ï¼‰
echo "ğŸ“¥ Downloading VOC Augmented Annotations (SegmentationClassAug)..."
wget https://www.dropbox.com/sh/oeu149j8qtbsu4s/AACyqg6XWqU5s8PpZ9e1KxgRa/VOC_Aug.tar?dl=1 -O VOC_Aug.tar
tar -xvf VOC_Aug.tar
rm VOC_Aug.tar

# 4. ç§»åŠ¨å¢å¼ºæ ‡æ³¨åˆ°æ­£ç¡®ç›®å½•
mv VOC_Aug/SegmentationClassAug VOC2012/
rm -r VOC_Aug

# 5. ç¡®ä¿æœ‰ ImageSets æ–‡ä»¶ï¼ˆä½ ä¹Ÿå¯ä»¥ç”¨ repo ä¸­çš„ï¼‰
mkdir -p VOC2012/ImageSets/Segmentation
cd VOC2012/ImageSets/Segmentation
# å¦‚æœæ²¡æœ‰train_aug.txtï¼Œå¯ä»¥ä»ç½‘ä¸Šä¸‹è½½
wget https://raw.githubusercontent.com/meetshah1995/pytorch-semseg/master/datasets/voc/train_aug.txt

echo "âœ… æ•°æ®å‡†å¤‡å®Œæˆï¼ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š"
echo "~/deeplab_data/VOCdevkit/VOC2012/"

#è¿è¡Œä»£ç 
python main.py --model deeplabv3plus_mobilenet --gpu_id 0 --year 2012_aug --crop_val --lr 0.01 --crop_size 513 --batch_size 16 --output_stride 16
python main.py --model deeplabv3plus_mobilenet --gpu_id 0 --year 2012_aug --crop_val --lr 0.01 --crop_size 513 --batch_size 16 --output_stride 16 --ckpt checkpoints/best_deeplabv3plus_mobilenet_voc_os16.pth --test_only --save_val_results

#ç¦»çº¿è¿è¡Œ
tmux new -s trainjob
